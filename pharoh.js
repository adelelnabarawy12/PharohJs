var Pharoh={Apps:[],Controllers:[],Scopes:[],Views:[],Forms:[],Validations:[],Compile:function(e={text:document.body.innerHTML},n){let o=e.text.trim(),t=document.head.innerHTML;Object.getOwnPropertyNames(n).forEach(function(e){const a=new RegExp(`#{[ ]{0,}${e}[ ]{0,}}`,"g");o=o.replace(a,n[e]),t=t.replace(a,n[e])}),document.body.innerHTML=o,document.head.innerHTML=t},CompileView:function(e={text:document.body.innerHTML},n={}){let o=e.text.trim();return Object.getOwnPropertyNames(n).forEach(function(e){const t=new RegExp(`#{[ ]{0,}${e}[ ]{0,}}`,"g");o=o.replace(t,n[e])}),o},Controller:function(e=function(e){}){$domain={},e($domain),Pharoh.Compile({text:document.body.innerHTML},$domain),Pharoh.Controllers.push({name:`c${Pharoh.Controllers.length}`,logic:e,domain:$domain})},Scope:function(e={name:"",scopeLogic:function(e){}}){var n;$Domain={},e.scopeLogic($Domain),document.body.querySelectorAll("scope").forEach(function(o){let t=o.attributes["scope-name"].value;e.name==t&&(o.innerHTML=Pharoh.CompileView({text:o.innerHTML},$Domain),n=o)}),Pharoh.Scopes.push({name:e.name,logic:e.scopeLogic,domain:$Domain,scopeDom:n})},View:function(e={name:"",html:"",model:{}}){var n,o=document.body.querySelectorAll("view");null==e.model?(o.forEach(function(o){let t=o.attributes["view-name"].value;e.name==t&&(o.innerHTML=e.html,n=o)}),Pharoh.Controllers.forEach(function(e){Pharoh.Compile({text:document.body.innerHTML},e.domain)})):o.forEach(function(o){let t=o.attributes["view-name"].value;e.name==t&&(o.innerHTML=Pharoh.CompileView({text:e.html},e.model),n=o)}),Pharoh.Views.push({name:e.name,html:e.html,model:e.model,viewDom:n})},Iterator:function(e={viewName:"",models:[],appendOn:!1}){var n=void 0;e.appendOn=null!=e.appendOn&&e.appendOn,Pharoh.Views.forEach(function(o){o.name==e.viewName&&(n=o)}),null==n?console.error(`Pharoh: There is no View has name = ${e.viewName}!`):(e.appendOn||(document.body.querySelector(`view[view-name="${e.viewName}"]`).innerHTML=""),e.models.forEach(function(o){document.body.querySelector(`view[view-name="${e.viewName}"]`).innerHTML+=Pharoh.CompileView({text:n.html},o)}))},Http:function(e={url:"",method:"",data:{},headers:{},callBack:function(){}}){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&e.callBack(this.responseText)},e.data=null==e.data?{}:e.data,n.open(e.method,e.url,!0),null!=e.headers&&Object.getOwnPropertyNames(e.headers).forEach(function(o){n.setRequestHeader([o],e.headers[o])});let o="";null!=e.data&&(o=Pharoh.Serialize(e.data)),n.send(o)},Serialize:function(e={}){let n=!0,o="";return Object.getOwnPropertyNames(e).forEach(function(t){n?(o+=`${[t]}=${e[t]}`,n=!1):o+=`&${[t]}=${e[t]}`}),o}};
